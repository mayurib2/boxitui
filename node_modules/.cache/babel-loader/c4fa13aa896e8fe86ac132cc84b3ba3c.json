{"ast":null,"code":"var _jsxFileName = \"/Users/rkarnik/Documents/personal/mayuri_code/breakless-react/src/routes/Home.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport './Home.css';\nimport { connect } from 'react-redux';\nimport cognitoUtils from '../lib/cognitoUtils';\nimport request from 'request';\nimport appConfig from '../config/app-config.json';\nimport { Link } from \"react-router-dom\";\n\nconst mapStateToProps = state => {\n  return {\n    session: state.session\n  };\n};\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSignOut = e => {\n      e.preventDefault();\n      cognitoUtils.signOutCognitoSession();\n    };\n\n    this.state = {\n      apiStatus: 'Not called'\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.session.isLoggedIn) {\n      // Call the API server GET /users endpoint with our JWT access token\n      const options = {\n        url: \"\".concat(appConfig.apiUri, \"/file_details\"),\n        headers: {\n          Authorization: \"Bearer \".concat(this.props.session.credentials.idToken)\n        }\n      };\n      this.setState({\n        apiStatus: 'Loading...'\n      });\n      request.get(options, (err, resp, body) => {\n        let apiStatus, apiResponse;\n\n        if (err) {\n          // is API server started and reachable?\n          apiStatus = 'Unable to reach API';\n          console.error(apiStatus + ': ' + err);\n        } else if (resp.statusCode !== 200) {\n          // API returned an error\n          apiStatus = 'Error response received';\n          apiResponse = body;\n          console.error(apiStatus + ': ' + JSON.stringify(resp));\n        } else {\n          apiStatus = 'Successful response received.';\n          apiResponse = body;\n        }\n\n        this.setState({\n          apiStatus,\n          apiResponse\n        });\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"Home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"Home-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, this.props.session.isLoggedIn ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"You are logged in as user (\", this.props.session.user.email, \").\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/files/upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Upload New File\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/files/update\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Upload Existing File\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/files/view\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"View File\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"API status: \", this.state.apiStatus), React.createElement(\"div\", {\n      className: \"Home-api-response\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, this.state.apiResponse)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      className: \"Home-link\",\n      href: \"#\",\n      onClick: this.onSignOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Sign out\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"You are not logged in.\"), React.createElement(\"a\", {\n      className: \"Home-link\",\n      href: cognitoUtils.getCognitoSignInUri(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Sign in\")), React.createElement(\"div\", {\n      className: \"Home-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default connect(mapStateToProps)(Home);","map":{"version":3,"sources":["/Users/rkarnik/Documents/personal/mayuri_code/breakless-react/src/routes/Home.js"],"names":["React","Component","connect","cognitoUtils","request","appConfig","Link","mapStateToProps","state","session","Home","constructor","props","onSignOut","e","preventDefault","signOutCognitoSession","apiStatus","componentDidMount","isLoggedIn","options","url","apiUri","headers","Authorization","credentials","idToken","setState","get","err","resp","body","apiResponse","console","error","statusCode","JSON","stringify","render","user","email","getCognitoSignInUri"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport logo from './logo.svg'\nimport './Home.css'\nimport { connect } from 'react-redux'\nimport cognitoUtils from '../lib/cognitoUtils'\nimport request from 'request'\nimport appConfig from '../config/app-config.json'\nimport {Link} from \"react-router-dom\";\n\n\n\nconst mapStateToProps = state => {\n  return { session: state.session }\n}\n\nclass Home extends Component {\n  constructor (props) {\n    super(props)\n    this.state = { apiStatus: 'Not called' }\n  }\n\n  componentDidMount () {\n    if (this.props.session.isLoggedIn) {\n      // Call the API server GET /users endpoint with our JWT access token\n      const options = {\n        url: `${appConfig.apiUri}/file_details`,\n        headers: {\n          Authorization: `Bearer ${this.props.session.credentials.idToken}`\n        }\n      }\n\n      this.setState({ apiStatus: 'Loading...' })\n      request.get(options, (err, resp, body) => {\n        let apiStatus, apiResponse\n        if (err) {\n          // is API server started and reachable?\n          apiStatus = 'Unable to reach API'\n          console.error(apiStatus + ': ' + err)\n        } else if (resp.statusCode !== 200) {\n          // API returned an error\n          apiStatus = 'Error response received'\n          apiResponse = body\n          console.error(apiStatus + ': ' + JSON.stringify(resp))\n        } else {\n          apiStatus = 'Successful response received.'\n          apiResponse = body\n        }\n        this.setState({ apiStatus, apiResponse })\n      })\n    }\n  }\n\n  onSignOut = (e) => {\n    e.preventDefault()\n    cognitoUtils.signOutCognitoSession()\n  }\n\n  render () {\n    return (\n      <div className=\"Home\">\n        <header className=\"Home-header\">\n          { this.props.session.isLoggedIn ? (\n            <div>\n              {/*<p>You are logged in as user {this.props.session.user.userName} ({this.props.session.user.email}).</p>*/}\n              <p>You are logged in as user ({this.props.session.user.email}).</p>\n              <p></p>\n              <div>\n                <Link to=\"/files/upload\">Upload New File</Link>\n              </div>\n              <div>\n                <Link to=\"/files/update\">Upload Existing File</Link>\n              </div>\n              <div>\n                <Link to=\"/files/view\">View File</Link>\n              </div>\n              <div>\n                <div>API status: {this.state.apiStatus}</div>\n                <div className=\"Home-api-response\">{this.state.apiResponse}</div>\n              </div>\n              <p></p>\n              <a className=\"Home-link\" href=\"#\" onClick={this.onSignOut}>Sign out</a>\n            </div>\n          ) : (\n            <div>\n              <p>You are not logged in.</p>\n              <a className=\"Home-link\" href={cognitoUtils.getCognitoSignInUri()}>Sign in</a>\n            </div>\n          )}\n          <div className=\"Home-details\">\n            <hr></hr>\n\n          </div>\n        </header>\n      </div>\n    )\n  }\n}\n\nexport default connect(mapStateToProps)(Home)\n"]},"metadata":{},"sourceType":"module"}