{"ast":null,"code":"var _jsxFileName = \"/Users/rkarnik/Documents/personal/mayuri_code/breakless-react/src/components/files/UploadFile.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport appConfig from \"../../config/app-config\";\nimport { connect } from \"react-redux\";\nimport UploadSuccessMessage from \"./UploadSuccessMessage\";\nimport cognitoUtils from \"../../lib/cognitoUtils\";\nimport './UploadFile.css';\n\nconst uuid = require('uuidv4').default;\n\nconst mapStateToProps = state => {\n  return {\n    session: state.session\n  };\n};\n\nclass UploadFile extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.onChangeHandler = event => {\n      console.log(\" onChangeHandler this.props.session.credentials.idToken\", this.props.session.credentials.idToken);\n      console.log(event.target.files[0]);\n      this.setState({\n        selectedFile: event.target.files[0],\n        loaded: 0\n      });\n    };\n\n    this.onBlurHandler = event => {\n      console.log(event.target.value);\n      this.setState({\n        typedText: event.target.value\n      });\n    };\n\n    this.onClickHandler = async () => {\n      let chosenFile = this.state.selectedFile;\n      console.log(\"selectedFile = \", chosenFile);\n      console.log(\" onClickHandler this.props.session.credentials.idToken\", this.props.session.credentials.idToken);\n      let params = {\n        user_file_name: chosenFile.name,\n        file_type: chosenFile.type,\n        is_existing_file: 'false'\n      };\n      console.log(\"UpLoadNewFile: Call to get preSignedUrl\");\n\n      const _ref = await axios.post(\"\".concat(appConfig.apiUri, \"/signed_url\"), params, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': \"Bearer \".concat(this.props.session.credentials.idToken)\n        }\n      }),\n            presignedPostData = _ref.data;\n\n      console.log(\"UpLoadNewFile presignedPostData ,\", presignedPostData);\n      console.log(\"UpLoadNewFile presignedPostData.body ,\", presignedPostData.body);\n      const formData = new FormData();\n      Object.keys(presignedPostData.body.fields).forEach(key => {\n        console.log(\"key \", key);\n        console.log(\"presignedPostData.body.fields[key] \", presignedPostData.body.fields[key]);\n        formData.append(key, presignedPostData.body.fields[key]);\n      });\n      formData.append('file', chosenFile);\n      console.log(\"UpLoadNewFile MAKING UPLOAD CALL TO \", presignedPostData.body.url);\n      let uploadResult = await axios.post(presignedPostData.body.url, formData);\n      console.log(\" UpLoadNewFile Before storing filedeatils presignedPostData.body \", presignedPostData.body);\n      console.log(\" UpLoadNewFile Before storing filedeatils presignedPostData.body.fields \", presignedPostData.body.fields);\n      console.log(\" UpLoadNewFile Before storing filedeatils presignedPostData.body.fields.key \", presignedPostData.body.fields.key);\n      let create_file_details_params = {\n        user_file_name: chosenFile.name,\n        file_description: this.state.typedText,\n        unique_file_name: presignedPostData.body.fields.key\n      };\n      console.log(\"UpLoadNewFile create_file_details_params = \", JSON.stringify(create_file_details_params));\n      let storedFileDetails = await axios.post(\"\".concat(appConfig.apiUri, \"/file_details\"), create_file_details_params, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': \"Bearer \".concat(this.props.session.credentials.idToken)\n        }\n      });\n      console.log(\"UpLoadNewFile uploadResult \", uploadResult);\n      console.log(\"UpLoadNewFile storedFileDetails \", storedFileDetails);\n      this.setState({\n        isUploadSuccess: 'true'\n      });\n    };\n\n    this.onSignOut = e => {\n      e.preventDefault();\n      cognitoUtils.signOutCognitoSession();\n    };\n\n    console.log(\"props \", props.location);\n    console.log(\"this.stat \", this.state);\n    this.state = {\n      selectedFile: null,\n      typedText: '',\n      isUploadSuccess: 'false'\n    };\n  }\n\n  renderUploadResult() {\n    if (this.state.isUploadSuccess === 'true') {\n      return React.createElement(UploadSuccessMessage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"upload-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, this.props.session.isLoggedIn ? React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Home\")), React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/files/view\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"View Uploaded Files\")), React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/files/update\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Update Existing File\"))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      method: \"post\",\n      action: \"#\",\n      id: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group files\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Upload Your File \"), React.createElement(\"input\", {\n      type: \"file\",\n      name: \"file\",\n      onChange: this.onChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      onBlur: this.onBlurHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-success btn-block\",\n      onClick: this.onClickHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Upload\"))))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"Home-link\",\n      href: \"#\",\n      onClick: this.onSignOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Sign out\")), this.renderUploadResult()) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"You are not logged in.\"), React.createElement(\"a\", {\n      className: \"Home-link\",\n      href: cognitoUtils.getCognitoSignInUri(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Sign in\")));\n  }\n\n}\n\nexport default connect(mapStateToProps)(UploadFile);","map":{"version":3,"sources":["/Users/rkarnik/Documents/personal/mayuri_code/breakless-react/src/components/files/UploadFile.js"],"names":["React","Component","Link","axios","appConfig","connect","UploadSuccessMessage","cognitoUtils","uuid","require","default","mapStateToProps","state","session","UploadFile","constructor","props","context","onChangeHandler","event","console","log","credentials","idToken","target","files","setState","selectedFile","loaded","onBlurHandler","value","typedText","onClickHandler","chosenFile","params","user_file_name","name","file_type","type","is_existing_file","post","apiUri","headers","presignedPostData","data","body","formData","FormData","Object","keys","fields","forEach","key","append","url","uploadResult","create_file_details_params","file_description","unique_file_name","JSON","stringify","storedFileDetails","isUploadSuccess","onSignOut","e","preventDefault","signOutCognitoSession","location","renderUploadResult","render","isLoggedIn","getCognitoSignInUri"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Link} from 'react-router-dom';\nimport axios from 'axios';\nimport appConfig from \"../../config/app-config\";\nimport {connect} from \"react-redux\";\nimport UploadSuccessMessage from \"./UploadSuccessMessage\";\nimport cognitoUtils from \"../../lib/cognitoUtils\";\nimport './UploadFile.css'\n\nconst uuid = require('uuidv4').default;\nconst mapStateToProps = state => {\n    return {session: state.session}\n}\n\nclass UploadFile extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        console.log(\"props \", props.location);\n        console.log(\"this.stat \", this.state);\n        this.state = {\n            selectedFile: null,\n            typedText: '',\n            isUploadSuccess: 'false'\n\n        }\n    }\n\n    onChangeHandler = event => {\n        console.log(\" onChangeHandler this.props.session.credentials.idToken\", this.props.session.credentials.idToken);\n        console.log(event.target.files[0]);\n        this.setState({\n            selectedFile: event.target.files[0],\n            loaded: 0\n        });\n    };\n\n    onBlurHandler = event => {\n        console.log(event.target.value);\n        this.setState({typedText: event.target.value});\n    };\n\n    onClickHandler = async () => {\n        let chosenFile = this.state.selectedFile;\n        console.log(\"selectedFile = \", chosenFile);\n        console.log(\" onClickHandler this.props.session.credentials.idToken\", this.props.session.credentials.idToken);\n\n        let params = {\n            user_file_name: chosenFile.name,\n            file_type: chosenFile.type,\n            is_existing_file: 'false'\n        };\n\n        console.log(\"UpLoadNewFile: Call to get preSignedUrl\");\n        const {data: presignedPostData} = await axios.post(`${appConfig.apiUri}/signed_url`,\n            params,\n            {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${this.props.session.credentials.idToken}`\n                }\n            });\n        console.log(\"UpLoadNewFile presignedPostData ,\", presignedPostData);\n        console.log(\"UpLoadNewFile presignedPostData.body ,\", presignedPostData.body);\n        const formData = new FormData();\n        Object.keys(presignedPostData.body.fields).forEach(key => {\n            console.log(\"key \", key);\n            console.log(\"presignedPostData.body.fields[key] \", presignedPostData.body.fields[key]);\n            formData.append(key, presignedPostData.body.fields[key]);\n        });\n        formData.append('file', chosenFile);\n        console.log(\"UpLoadNewFile MAKING UPLOAD CALL TO \", presignedPostData.body.url);\n        let uploadResult = await axios.post(presignedPostData.body.url, formData);\n        console.log(\" UpLoadNewFile Before storing filedeatils presignedPostData.body \", presignedPostData.body);\n        console.log(\" UpLoadNewFile Before storing filedeatils presignedPostData.body.fields \", presignedPostData.body.fields);\n        console.log(\" UpLoadNewFile Before storing filedeatils presignedPostData.body.fields.key \", presignedPostData.body.fields.key);\n        let create_file_details_params = {\n            user_file_name: chosenFile.name,\n            file_description: this.state.typedText,\n            unique_file_name: presignedPostData.body.fields.key\n        };\n        console.log(\"UpLoadNewFile create_file_details_params = \", JSON.stringify(create_file_details_params));\n\n        let storedFileDetails = await axios.post(`${appConfig.apiUri}/file_details`,\n            create_file_details_params,\n            {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${this.props.session.credentials.idToken}`\n                }\n            }\n        );\n        console.log(\"UpLoadNewFile uploadResult \", uploadResult);\n        console.log(\"UpLoadNewFile storedFileDetails \", storedFileDetails);\n        this.setState({isUploadSuccess: 'true'});\n\n    }\n    onSignOut = (e) => {\n        e.preventDefault()\n        cognitoUtils.signOutCognitoSession()\n    }\n\n    renderUploadResult() {\n        if (this.state.isUploadSuccess === 'true') {\n            return <UploadSuccessMessage/>\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"upload-body\">\n                { this.props.session.isLoggedIn ? (\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-md-3\">\n                            <Link to=\"/\">Home</Link>\n                        </div>\n                        <div className=\"col-md-3\">\n                            <Link to=\"/files/view\">View Uploaded Files</Link>\n                        </div>\n                        <div className=\"col-md-3\">\n                            <Link to=\"/files/update\">Update Existing File</Link>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-md-6\">\n                            <form method=\"post\" action=\"#\" id=\"#\">\n                                <div className=\"form-group files\">\n                                    <label>Upload Your File </label>\n                                    <input type=\"file\" name=\"file\" onChange={this.onChangeHandler}/>\n                                    <input type=\"text\" onBlur={this.onBlurHandler}/>\n                                    <button type=\"button\" className=\"btn btn-success btn-block\"\n                                            onClick={this.onClickHandler}>Upload\n                                    </button>\n\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <a className=\"Home-link\" href=\"#\" onClick={this.onSignOut}>Sign out</a>\n                    </div>\n\n                    {this.renderUploadResult()}\n                </div>\n                ) : (\n                    <div>\n                        <p>You are not logged in.</p>\n                        <a className=\"Home-link\" href={cognitoUtils.getCognitoSignInUri()}>Sign in</a>\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default connect(mapStateToProps)(UploadFile)\n"]},"metadata":{},"sourceType":"module"}